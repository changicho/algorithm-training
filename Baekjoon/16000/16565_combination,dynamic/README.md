# 16565. N포커

[링크](https://www.acmicpc.net/problem/16565)

| 난이도 | 정답률(\_%) | 시간 제한(초) |
| :----: | :---------: | :-----------: |
| Gold I |   43.020    |       1       |

## 설계

### 시간 복잡도

뽑을 카드의 수 N은 최대 52이다.

모든 경우를 수행할 경우 2^52 정도 이므로 이는 제한시간 내에 불가능하다.

따라서 동적 계획법과 조합론을 이용해 구현한다.

### 공간 복잡도

플레이어가 이기는 경우의 수를 10,007로 나눈 나머지 값을 찾아야한다.

연산 시에 int형 범위를 초과하지 않음이 보장되므로 (최악의 경우 10,007^2) int형으로 선언한다.

### 파스칼의 삼각형

조합론을 이용하기 위해 파스칼의 삼각형을 dp를 이용해 미리 구해놓는다.

카드의 개수는 52장 이므로 52번째 까지 구한다.

```cpp
nCk[n][k] = nCk[n-1][k-1] + nCk[n-1][k];
```

초기값은 다음과 같다

```cpp
nCk[i][i] = nCk[i][0] = 1;
```

### 포함 배제의 원리

집합에서 합의 공식을 n개짜리 합집합으로 일반화한 것이다.

```text
∣A∪B∣=∣A∣+∣B∣−∣A∩B∣
∣A∪B∪C∣=∣A∣+∣B∣+∣C∣−∣A∩B∣−∣B∩C∣−∣C∩A∣+∣A∩B∩C∣
```

일반적으로 n개의 유한 집합 A1,A2,…,An이 있다고 하자. 그 합집합의 크기는 아래와 같다. (An는 n번째 유한 집합)

부분집합의 개수가 홀수개면 부분 집합에서 교집합을 통해 만들어진 원소의 갯수들에게 +부호를 붙이고 짝수라면 −부호를 붙인다.

```text
|A1∪A2∪A3∪ ... ∪An| =
+ sigma(i: 1 ~ N)Ai
- sigma(i,j:1 <= i <= j <= N)|Ai∩Aj|
+ sigma(i,j,k:1 <= i <= j <= k <= N)|Ai∩Aj∩Ak|
- ...
// ...
```

### 포카드

우리는 포카드 족보를 만들어야 한다.

총 숫자는 13 종류, 즉 순수한 포카드는 13종이다.

만약 우리가 뽑는 카드의 수 N이 15라고 한다면, 포카드가 수중에 1종류, 2종류, 3종류가 들어올 수 있다.

막연하게 생각하면, 아래와 같이 생각할 수 있다.

```cpp
answer = nCk[13][i] * nCk[52-4*i][N-4*i];
```

13종의 숫자 중에서 i개 만큼을 고르고, 나머지 카드 뭉치에서 부족한 수의 카드를 뽑는다.

구해야 하는 것은 한 종류라도 4가지가 모인 경우이다.

그러나 이 경우 우리는 중복 된 조합을 같이 카운트하게 된다.

그렇기에 우리는 중복된 쌍을 제거해야한다.

1. 1종류의 조합을 구한다.
2. 2종류의 조합이 중복되어 해당 부분을 제거한다.
3. 제거하고 보니, 3종류의 조합이 같이 제거 되었다.
4. 3종류의 조합을 추가한다. 추가하니 4종류의 조합이 같이 제거 되었다.
5. 4종류의 조합을 추가한다.
6. 반복...

이를 요약하면 다음과 같다.

> (한 종류를 4가지 모은 경우) - (두 종류를 4가지 모은 경우) + (세 종류를 4가지 모은 경우) - (네 종류를 4가지 모은 경우) + ... (N종류까지)

n개를 뽑아 i종류를 4가지 모은 경우의 수는 조합으로 생각해 볼 수 있다.

카드 4 \* i개는 모아야하니 정해진 부분이고, 4 \* i개를 제외한 나머지 n − 4 \* i개는 아무렇게나 들어가도 된다.

```cpp
nCk[13][i]; // 카드 4 * i개 조합
nCk[52 - 4 * i][N - 4 * i]; // i개를 제외한 나머지 n − 4 * i개 조합
```

```cpp
int answer = 0;
for (int i = 1; i <= 13 && N - 4 * i >= 0; ++i) {
  if (i % 2 == 1) {
    answer += nCk[52 - 4 * i][N - 4 * i] * nCk[13][i] % 10007;
    answer %= 10007;
  } else {
    answer -= nCk[52 - 4 * i][N - 4 * i] * nCk[13][i] % 10007;
    answer += 10007;
    answer %= 10007;
  }
}
```

## 정리

| 내 코드 (ms) | 빠른 코드 (ms) |
| :----------: | :------------: |
|      0       |       0        |

## 고생한 점
